import { ImageResponse } from "@vercel/og";
import { NextRequest } from "next/server";

import { getConfigFromUrl } from "lib/ogImage";

const dINNextLTProRegular = fetch(
  new URL("../../assets/DINNextLTPro-Regular.otf", import.meta.url)
).then((res) => res.arrayBuffer());
const dINNextLTProMedium = fetch(
  new URL("../../assets/DINNextLTPro-Medium.otf", import.meta.url)
).then((res) => res.arrayBuffer());

const handler = async (req: NextRequest) => {
  try {
    const { title, url } = getConfigFromUrl(req.url);
    const dINNextLTProRegularData = await dINNextLTProRegular;
    const dINNextLTProMediumData = await dINNextLTProMedium;

    return new ImageResponse(
      (
        <div
          style={{
            backgroundColor: "#F6F1EB",
            height: "100%",
            width: "100%",
            display: "flex",
            justifyContent: "center",
            flexDirection: "column",
            flexWrap: "nowrap",
            padding: "0 55px 0 55px"
          }}
        >
          <svg
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 470 513"
            style={{
              position: "absolute",
              bottom: 36,
              right: 0
            }}
          >
            <g opacity={0.2} fillRule="evenodd" clipRule="evenodd" fill="#E1D9CE">
              <path d="M243.067 184.339c.776.559 1.55 1.117 2.366 1.628l.034-.022c4.648 2.937 9.02 6.069 13.049 9.636 16.323 14.722 26.727 34.315 30.195 55.416h.058c13.918-29.583 24.815-58.423 32.736-86.462l.399-1.488c.921-3.436 1.841-6.867 2.692-10.263l.003-.023c.011-.078.025-.182.077-.286-1.649-2.343-3.343-4.595-5.266-6.744-3.639-4.001-7.875-7.51-12.568-10.573a66.492 66.492 0 0 1-1.425-1.012c-1.141-.825-2.267-1.639-3.565-2.303-.6-.329-1.246-.545-1.892-.76-.474-.159-.949-.317-1.405-.52-.39-.182-.796-.32-1.203-.458a17.203 17.203 0 0 1-.857-.308c-7.887-3.281-16.231-5.43-24.77-5.43-.21 0-.415.023-.621.045-.209.023-.419.047-.638.047-5.265.057-10.439.811-15.407 2.114-7.932 2.092-15.303 5.75-21.805 10.551-2.598 1.932-5.082 4.035-7.371 6.344-2.45 2.48-4.785 5.132-6.845 8.036-1.603 2.309-3.125 4.686-4.464 7.224-2.289 4.309-3.892 8.836-5.151 13.454 7.887 1.223 15.567 3.463 22.927 6.596.45.194.901.386 1.352.578 1.908.814 3.812 1.626 5.665 2.588 1.334.69 2.518 1.543 3.7 2.395Zm-92.901 166.162c-7.074-3.68-13.278-8.458-19.092-13.659l-.035-.023c-3.239-2.881-6.467-5.83-9.271-9.168-.792-.905-1.466-1.911-2.142-2.919-.399-.594-.799-1.19-1.223-1.767-1.488 1.623-2.942 3.303-4.236 5.109-1.865 2.538-3.582 5.167-5.07 8.025-.19.342-.321.704-.452 1.069-.106.294-.212.588-.35.874-5.654 11.614-7.554 24.096-6.066 36.121.526 3.932 1.305 7.819 2.518 11.522 1.431 4.584 3.503 8.939 5.952 13.089 5.517 9.43 13.438 17.5 23.488 23.261.324.176.62.395.915.612.298.22.594.439.916.611.243.127.509.213.777.3.262.085.525.17.769.295 3.685 1.828 7.52 3.246 11.412 4.343 1.461.379 2.878.638 4.335.905.345.063.693.127 1.044.193l.221.041c3.82.707 7.684 1.422 11.569 1.422 1.546 0 3.019-.153 4.535-.31.291-.03.584-.061.879-.09.403-.025.817-.038 1.234-.051.721-.023 1.451-.045 2.154-.132.504-.686.985-1.315 1.488-1.943a135.67 135.67 0 0 0 1.832-2.378l1.373-1.715a836.484 836.484 0 0 1 2.892-3.723c1.187-1.524 2.368-3.04 3.518-4.541 15.647-20.53 30.138-40.808 43.382-60.766v-.149c-10.874 4.23-22.55 6.63-34.683 6.63-15.475 0-30.87-3.806-44.583-11.088Z" />
              <path d="M187.758 191.078c.367-.034.744-.034 1.145-.091 1.969-.149 3.892-.378 5.906-.378.916 0 1.878.092 2.793.149 3.297.114 6.559.491 9.821 1.029 4.281.708 8.47 1.76 12.591 3.223l3.239 1.235c2.347.937 4.659 1.909 6.868 3.086 7.475 3.966 13.736 9.179 19.253 15.009 10.267 10.825 16.94 24.233 19.573 38.635.572 3.258.95 6.516 1.099 9.877.172 3.337.389 6.71.114 10.059a75.664 75.664 0 0 1-8.47 28.714c-5.288 9.91-12.614 18.289-21.29 24.827-2.656 2.035-5.414 3.841-8.31 5.51a88.14 88.14 0 0 1-8.882 4.286c-8.928 3.601-18.543 5.636-28.502 5.636-12.224 0-24.437-3.064-35.346-8.802-.366-.194-.652-.48-1.03-.686-4.121-2.252-8.07-4.846-11.652-7.727-3.171-2.595-5.998-5.532-8.699-8.573-1.534-1.783-2.862-3.635-4.236-5.555-1.888-2.561-3.868-5.167-5.425-8.025-1.511-2.766-2.564-5.761-3.732-8.71-.068-.206-.148-.343-.229-.537-.606-1.623-1.488-3.052-1.968-4.721-.882-2.812-1.259-5.693-1.763-8.573a73.959 73.959 0 0 1-1.293-11.922c-.31-12.803 2.289-25.491 8.424-37.105 12.076-22.77 34.625-37.492 59.979-39.87h.022ZM313.518 116.056C299.507 87.708 286.333 44.066 305.711 0c38.345 45.266 30.699 96.361 21.245 125.567a84.864 84.864 0 0 0-13.438-9.522v.011Zm324.019 100.522c-1.282 0-2.45.206-3.457.595l.011.011c-5.276 2.149-11.217 17.26-4.624 57.897 27.048 38.453 42.134 71.636 45.614 100.293 28.123-56.159 13.346-100.933 4.235-119.566-12.454-25.479-30.814-39.23-41.779-39.23Zm-33.774 105.837.321 3.658v.011c5.253 57.954.194 102.877-14.8 134.312 31.34-10.654 51.668-25.742 60.894-44.969.207-.417.43-.833.653-1.25h.001c.455-.85.912-1.701 1.235-2.568 1.396-3.578 2.426-7.327 3.113-11.168 1.98-11.099.996-23.535-2.598-37.321-1.855-5.578-3.663-11.099-5.289-16.323-5.036-13.008-12.419-27.068-21.828-42.042a642.246 642.246 0 0 1-1.65-2.666l-.002-.003c-1.714-2.779-3.431-5.562-5.364-8.385-1.431 1.921-2.862 4.172-4.293 6.493-3.525 5.932-6.959 13.099-10.393 22.221Zm-38.778 29.263 8.241-4.858a55.954 55.954 0 0 0 1.601-.867l.002-.001c.365-.203.723-.402 1.064-.584a195.7 195.7 0 0 1 9.547-4.618c.051.925.079 1.813.107 2.693.035 1.078.069 2.144.144 3.251.836 16.152.687 31.069-.309 44.774-1.327 18.026-4.212 33.904-8.664 47.278-3.732 11.145-8.631 20.541-14.537 28.234a81.463 81.463 0 0 0-1.117 1.528h-.001v.001c-.838 1.164-1.685 2.341-2.637 3.386a59.727 59.727 0 0 1-8.127 7.338c-18.405 14.026-43.919 16.072-73.759 6.367 20.878-21.569 36.742-51.484 50.707-77.912 13.186-25.193 25.708-48.9 37.75-56.01h-.012Zm-60.155-19.992c-36.788 11.247-59.223 44.156-82.917 79.055l.023.022c-16.712 24.577-33.767 49.61-56.384 67.933 17.65 11.031 33.881 16.655 48.509 16.655 13.426 0 25.25-4.732 35.895-12.551 3.274-2.389 6.399-5.064 9.432-7.967 5.334-5.041 10.359-10.837 15.109-17.124 8.688-11.567 16.552-24.804 23.969-38.27 3.197-5.841 6.314-11.714 9.384-17.5l1.833-3.452a1046.3 1046.3 0 0 1 11.183-20.69c7.738-13.9 15.292-26.085 23.511-34.544-.186-.127-.464-.27-.705-.395a12.016 12.016 0 0 1-.119-.062c-7.658-5.144-20.066-10.745-38.723-11.11ZM202.183 14.266c4.922 43.46 32.896 73.02 57.758 91.194 3.891-.526 7.806-.823 11.789-.823 3.331 0 6.685.206 10.004.617-8.092-30.063-28.272-72.62-79.551-90.988ZM85.458 389.937c4.064 13.831 11.858 26.405 22.526 36.693-6.524.72-13.3 1.257-20.42 1.257-34.533 0-63.916-10.173-87.564-30.234 17.398-7.887 35.289-11.923 53.374-11.923 11.366 0 22.069 1.624 32.084 4.196v.011Zm71.218 59.965c-6.925-.811-13.759-2.412-20.283-4.892h-.011c-25.72 9.51-55.973 28.668-70.67 67.99 46.495-5.373 75.42-38.43 90.964-63.098Zm40.463-300.399c-3.319 6.253-5.494 12.848-7.119 19.547-28.113-17.147-57.426-44.558-68.403-87.103 40.668 7.293 67.83 29.149 85.881 52.547-3.915 4.573-7.474 9.511-10.37 15.009h.011ZM47.049 269.73c-15.11 0-30.333 2.71-45.442 8.082l-.012.011c24.266 24.897 56.396 38.339 95.577 40.259 3.228-4.652 6.948-8.813 10.988-12.653-.33-.731-.666-1.458-1.002-2.184-1.338-2.896-2.67-5.778-3.622-8.858-1.21-3.884-1.85-7.842-2.486-11.773l-.204-1.258c-15.659-6.71-33.698-11.626-53.798-11.626Z" />
              <path d="M239.962 374.745c-13.083 19.284-27.276 38.899-42.534 58.72l.011.011c-3.72 4.801-7.52 9.648-11.389 14.483a1525.266 1525.266 0 0 1-36.433 44.214c18.13.48 34.842-3.269 50.501-9.945 1.98-.834 3.926-1.68 5.837-2.594l1.42-.778c6.638-3.28 13.128-6.984 19.367-11.259 9.18-6.321 17.936-13.603 26.406-21.547 27.128-25.525 50.787-58.16 72.993-88.965 18.955-26.245 36.605-50.524 54.714-68.653 6.73-6.665 13.437-12.7 20.374-17.41 8.699-5.943 17.627-10.184 27.013-12.196-.025-.253-.075-.503-.124-.749a9.247 9.247 0 0 1-.105-.589c-6.581-59.565-51.771-117.576-75.351-144.095-1.717 11.67-4.075 23.524-6.867 35.481-1.202 5.201-2.553 10.459-3.949 15.74-1.832 6.744-3.778 13.534-5.953 20.369-5.059 16.072-11.102 32.338-18.039 48.855-2.61 6.161-5.242 12.345-8.104 18.564-2.198 4.812-4.43 9.659-6.799 14.494-14.628 30.223-32.301 61.074-52.859 92.669a4505.04 4505.04 0 0 0-2.375 3.575 1619.28 1619.28 0 0 1-7.755 11.605Zm196.73-97.001c-31.363 3.475-62.084 45.803-94.546 90.875l.011-.012c-29.165 40.431-60.722 84.027-99.811 112.421 15.487 3.944 29.875 6.024 42.923 6.024 17.444 0 32.05-3.703 45.03-9.761 3.297-1.521 6.547-3.041 9.615-4.893 2.953-1.783 5.7-3.772 8.47-5.829 22.652-16.598 39.753-41.174 57.186-66.87 13.587-20.061 27.505-40.431 44.56-56.925 6.525-6.31 13.541-11.945 21.176-16.826 5.757-3.75 11.755-7.19 18.348-9.854a28.603 28.603 0 0 0-1.191-1.869c-.3-.444-.595-.881-.869-1.331-13.06-21.159-29.841-32.772-50.902-35.15Z" />
            </g>
          </svg>
          <div
            style={{
              fontSize: title.length > 85 ? 60 : 86,
              fontWeight: 400,
              letterSpacing: "-0.02em",
              lineHeight: title.length > 85 ? "80px" : "106px",
              marginBottom: 30,
              color: "#000",
              maxWidth: title.length > 40 ? "100%" : "800px"
            }}
          >
            {title}
          </div>
          <div
            style={{
              display: "flex",
              alignItems: "center",
              position: "absolute",
              bottom: 55,
              left: 55,
              background: "#e8e1d8",
              borderLeft: "#ccbfae 4px solid"
            }}
          >
            <div
              style={{
                paddingLeft: 24,
                paddingRight: 24,
                paddingTop: 18,
                paddingBottom: 18,
                fontSize: 36,
                fontWeight: 400,
                letterSpacing: "-0.025em",
                color: "#685946"
              }}
            >
              {url && url.length > 50 ? url?.slice(0, 50) + "..." : url}
            </div>
          </div>
          <div
            style={{
              position: "absolute",
              top: 55,
              left: 55,
              display: "flex",
              alignItems: "center",
              justifyContent: "center",
              justifyItems: "center"
            }}
          >
            <svg width={350} viewBox="0 0 208 35" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M29.6908 12.3785C29.7451 12.3445 29.7967 12.3073 29.8483 12.2701C29.927 12.2134 30.0058 12.1566 30.0946 12.1107C30.2179 12.0467 30.3447 11.9926 30.4717 11.9384L30.4717 11.9384L30.5617 11.8999C31.0516 11.6914 31.5629 11.5423 32.0878 11.4609C32.004 11.1535 31.8974 10.8522 31.745 10.5653C31.6558 10.3964 31.5545 10.2381 31.4478 10.0844C31.3107 9.89116 31.1552 9.71463 30.9922 9.54952C30.8398 9.39582 30.6745 9.25582 30.5015 9.12723C30.0687 8.80765 29.5781 8.56417 29.05 8.42493C28.7194 8.33819 28.375 8.28797 28.0245 8.28416C28.0099 8.28416 27.9959 8.28262 27.982 8.28109L27.982 8.28109C27.9683 8.27958 27.9547 8.27808 27.9407 8.27808C27.3723 8.27808 26.8168 8.42112 26.2919 8.6395C26.273 8.64703 26.2539 8.65353 26.2348 8.66001L26.2348 8.66001C26.2077 8.66923 26.1807 8.67841 26.1547 8.69048C26.1244 8.70402 26.0928 8.71456 26.0612 8.7251C26.0182 8.73943 25.9752 8.75377 25.9353 8.7757C25.8489 8.81994 25.7739 8.87412 25.698 8.92903C25.6668 8.95156 25.6355 8.97422 25.6031 8.99636C25.2907 9.20027 25.0088 9.43387 24.7665 9.70018C24.6385 9.84323 24.5257 9.99312 24.416 10.1491C24.4195 10.156 24.4204 10.1629 24.4211 10.1681L24.4213 10.1696C24.4779 10.3957 24.5392 10.6241 24.6005 10.8528L24.6271 10.9518C25.1543 12.8183 25.8797 14.738 26.8062 16.7072H26.81C27.0408 15.3026 27.7334 13.9984 28.8199 13.0184C29.0881 12.781 29.3792 12.5725 29.6885 12.377L29.6908 12.3785ZM37.3042 22.4215C36.9172 22.7677 36.5042 23.0857 36.0334 23.3307C35.1206 23.8154 34.0958 24.0688 33.0657 24.0688C32.258 24.0688 31.4809 23.909 30.757 23.6275V23.6374C31.6386 24.9659 32.6032 26.3157 33.6447 27.6822C33.7212 27.7821 33.7998 27.883 33.8788 27.9843L33.879 27.9846C33.9432 28.0669 34.0076 28.1496 34.0714 28.2324L34.1628 28.3465C34.2032 28.3998 34.2436 28.453 34.2847 28.5048C34.3183 28.5466 34.3503 28.5885 34.3838 28.6341C34.4306 28.6399 34.4792 28.6414 34.5272 28.6429C34.5549 28.6438 34.5825 28.6446 34.6093 28.6463L34.6679 28.6523H34.6679C34.7688 28.6627 34.8668 28.6729 34.9697 28.6729C35.2284 28.6729 35.4856 28.6253 35.7398 28.5782L35.7545 28.5755L35.824 28.5627L35.8241 28.5627C35.921 28.545 36.0153 28.5277 36.1126 28.5025C36.3717 28.4294 36.6269 28.3351 36.8722 28.2133C36.8885 28.2051 36.906 28.1994 36.9234 28.1937C36.9412 28.188 36.9589 28.1822 36.9751 28.1738C36.9966 28.1623 37.0163 28.1477 37.0361 28.1331C37.0557 28.1186 37.0754 28.1041 37.097 28.0924C37.766 27.7089 38.2932 27.1717 38.6605 26.544C38.8235 26.2677 38.9614 25.9778 39.0567 25.6727C39.1374 25.4262 39.1892 25.1675 39.2243 24.9058C39.3233 24.1053 39.1969 23.2744 38.8205 22.5013C38.8113 22.4823 38.8042 22.4627 38.7972 22.4432C38.7885 22.4189 38.7798 22.3947 38.7671 22.372C38.6681 22.1818 38.5538 22.0068 38.4296 21.8379C38.3435 21.7176 38.2467 21.6058 38.1477 21.4977C38.1194 21.5361 38.0929 21.5758 38.0663 21.6153L38.0663 21.6154L38.0663 21.6154C38.0213 21.6825 37.9764 21.7494 37.9237 21.8097C37.737 22.0319 37.5222 22.2282 37.3065 22.4199L37.3042 22.4215ZM33.5004 12.7167C33.51 12.7172 33.5195 12.7177 33.5289 12.7186H33.5304C35.2181 12.8769 36.7191 13.8569 37.5229 15.3726C37.9313 16.1457 38.1043 16.9903 38.0837 17.8425C38.0768 18.1057 38.0479 18.3728 37.9976 18.6361C37.991 18.6737 37.9848 18.7114 37.9785 18.749C37.9529 18.903 37.9274 19.0563 37.8803 19.2067C37.8616 19.2716 37.8338 19.331 37.8059 19.3907C37.786 19.4333 37.766 19.476 37.7492 19.521C37.7472 19.5259 37.7452 19.5303 37.7432 19.5345C37.7399 19.5415 37.7368 19.5482 37.734 19.5567C37.7188 19.595 37.704 19.6333 37.6891 19.6717C37.6278 19.8301 37.5666 19.9883 37.4856 20.1365C37.3909 20.3103 37.2728 20.4701 37.1572 20.6263C37.1462 20.6411 37.1353 20.6559 37.1244 20.6707C37.033 20.7985 36.9446 20.9218 36.8425 21.0405C36.6627 21.2429 36.4745 21.4384 36.2635 21.6111C36.025 21.8029 35.7621 21.9756 35.4878 22.1255C35.4754 22.1323 35.4644 22.1404 35.4536 22.1484C35.4425 22.1565 35.4316 22.1646 35.4192 22.1711C34.6931 22.5531 33.8802 22.757 33.0664 22.757C32.4036 22.757 31.7635 22.6216 31.1692 22.3819C30.9666 22.2975 30.77 22.2031 30.578 22.0966C30.3852 21.9855 30.2016 21.8653 30.0248 21.7298C29.4473 21.2946 28.9597 20.7369 28.6076 20.0772C28.2838 19.4631 28.1017 18.8164 28.0438 18.1658C28.027 17.9612 28.0379 17.7553 28.0486 17.5511C28.0495 17.5328 28.0505 17.5145 28.0514 17.4962C28.0613 17.2725 28.0865 17.0557 28.1246 16.8388C28.2998 15.8801 28.744 14.9876 29.4275 14.267C29.7947 13.879 30.2115 13.532 30.709 13.268C30.8561 13.1896 31.01 13.1249 31.1662 13.0625L31.3818 12.9804C31.6561 12.883 31.935 12.813 32.2199 12.7658C32.4371 12.73 32.6542 12.7049 32.8737 12.6973C32.8895 12.6963 32.9056 12.6952 32.9218 12.694C32.9677 12.6908 33.0145 12.6874 33.0596 12.6874C33.1585 12.6874 33.2542 12.6957 33.3502 12.704C33.3843 12.707 33.4184 12.7099 33.4527 12.7125C33.4691 12.7149 33.485 12.7158 33.5004 12.7167Z"
                fill="#DD8217"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M25.6747 0C26.9646 2.93323 26.0877 5.8383 25.1551 7.72531V7.72454C24.832 7.90944 24.5326 8.12249 24.2606 8.35837C23.6312 6.41429 23.1222 3.01312 25.6747 0ZM3.81723 14.4558C3.75019 14.43 3.67247 14.4163 3.58713 14.4163C2.85721 14.4163 1.63508 15.3316 0.80611 17.0277C0.199619 18.2679 -0.784025 21.2483 1.08802 24.9866C1.31965 23.079 2.32386 20.8701 4.12429 18.3105C4.56316 15.6056 4.16772 14.5997 3.81647 14.4566L3.81723 14.4558ZM5.81429 21.7048L5.83563 21.4613C5.60705 20.8542 5.37847 20.3771 5.1438 19.9822C5.04856 19.8277 4.95332 19.6778 4.85808 19.55C4.72939 19.7379 4.61513 19.9231 4.50106 20.108L4.50104 20.1081C4.4645 20.1673 4.42798 20.2265 4.39102 20.2858C3.76472 21.2825 3.27327 22.2184 2.93803 23.0843C2.82983 23.432 2.70945 23.7996 2.58602 24.1709C2.34677 25.0885 2.28125 25.9163 2.41306 26.6552C2.45878 26.9108 2.52735 27.1604 2.62031 27.3986C2.64178 27.4563 2.67217 27.5129 2.70251 27.5695C2.71738 27.5972 2.73224 27.6249 2.74602 27.6527C3.36013 28.9325 4.71331 29.9369 6.79946 30.646C5.80134 28.5536 5.46457 25.5633 5.81429 21.7056V21.7048ZM7.867 23.0866L8.41558 23.41H8.41482C9.21637 23.8832 10.0499 25.4613 10.9276 27.1383C11.8572 28.8975 12.9132 30.8887 14.303 32.3245C12.3166 32.9705 10.6183 32.8343 9.39313 31.9007C9.20113 31.7562 9.01979 31.5948 8.85217 31.4122C8.78881 31.3426 8.7324 31.2643 8.67661 31.1867C8.65189 31.1524 8.62729 31.1182 8.60226 31.085C8.2091 30.573 7.883 29.9475 7.63461 29.2057C7.33822 28.3154 7.14622 27.2585 7.05784 26.0586C6.99155 25.1463 6.98164 24.1533 7.03726 23.0782C7.0423 23.0045 7.04456 22.9336 7.04685 22.8618C7.04871 22.8032 7.0506 22.7441 7.05403 22.6826C7.24755 22.7693 7.46546 22.8743 7.68947 22.99C7.71214 23.002 7.73595 23.0153 7.76023 23.0288L7.76042 23.0289L7.76054 23.0289C7.79573 23.0485 7.8319 23.0686 7.867 23.0866ZM17.9392 27.3412C16.362 25.0182 14.8686 22.8276 12.4198 22.0789C11.1779 22.1033 10.3519 22.4761 9.84221 22.8185L9.83432 22.8226C9.81825 22.8309 9.79974 22.8405 9.78735 22.8489C10.3344 23.412 10.8373 24.2231 11.3523 25.1484C11.5946 25.5851 11.8423 26.0416 12.0967 26.5256L12.2189 26.7556L12.219 26.7558L12.2193 26.7564L12.2196 26.757C12.4237 27.1416 12.6309 27.532 12.8434 27.9203C13.3372 28.8166 13.8606 29.6977 14.4389 30.4677C14.7551 30.8862 15.0896 31.272 15.4446 31.6075C15.6465 31.8008 15.8546 31.9789 16.0725 32.1379C16.7811 32.6583 17.5681 32.9733 18.4619 32.9733C19.4356 32.9733 20.516 32.599 21.6909 31.8647C20.1853 30.645 19.0501 28.9787 17.9377 27.3428L17.9392 27.3412ZM28.7207 7.02033C30.3756 5.81052 32.2378 3.84286 32.5654 0.949959C29.152 2.17271 27.8087 5.0055 27.27 7.00664C27.491 6.97924 27.7142 6.96555 27.9359 6.96555C28.2011 6.96555 28.4617 6.98533 28.7207 7.02033ZM38.8349 28.3991C39.545 27.7143 40.0639 26.8773 40.3344 25.9567V25.9559C41.001 25.7847 41.7134 25.6766 42.47 25.6766C43.6739 25.6766 44.8648 25.9452 46.0229 26.4703C44.4488 27.8056 42.4929 28.4828 40.1942 28.4828C39.7203 28.4828 39.2692 28.447 38.8349 28.3991ZM36.9451 29.6224C36.5108 29.7875 36.056 29.894 35.595 29.9481C36.6297 31.5901 38.5551 33.7905 41.65 34.1482C40.6717 31.5307 38.658 30.2555 36.9459 29.6224H36.9451ZM33.3764 11.253C33.2682 10.8071 33.1234 10.368 32.9025 9.95184H32.9032C32.7105 9.58585 32.4735 9.25715 32.2129 8.95279C33.4145 7.39525 35.2225 5.94043 37.9297 5.45498C37.199 8.28701 35.2477 10.1116 33.3764 11.253ZM45.9175 18.4927C44.9118 18.1351 43.8984 17.9548 42.8927 17.9548C41.5547 17.9548 40.3539 18.2819 39.3116 18.7286L39.298 18.8123L39.298 18.8124C39.2557 19.0741 39.2131 19.3375 39.1326 19.596C39.0692 19.801 38.9805 19.9929 38.8914 20.1857L38.8914 20.1857C38.8691 20.234 38.8467 20.2824 38.8247 20.331C39.0937 20.5867 39.3413 20.8636 39.5562 21.1733C42.1643 21.0455 44.303 20.1507 45.9183 18.4935L45.9175 18.4927ZM32.8766 28.8537C31.8609 27.5344 30.9161 26.2287 30.0452 24.945C29.87 24.6859 29.6982 24.4273 29.529 24.1724L29.3709 23.9346C28.0025 21.8315 26.8261 19.7779 25.8524 17.7661C25.6947 17.4442 25.5461 17.1216 25.3998 16.8013C25.2093 16.3873 25.0341 15.9757 24.8604 15.5656C24.3986 14.4661 23.9963 13.3833 23.6596 12.3135C23.5148 11.8585 23.3853 11.4066 23.2634 10.9576C23.1704 10.6061 23.0805 10.2561 23.0005 9.90988C22.8146 9.11399 22.6576 8.32495 22.5433 7.54808C20.9738 9.31334 17.9657 13.1749 17.5276 17.1398C17.5259 17.1527 17.5233 17.1658 17.5206 17.179C17.5174 17.1954 17.514 17.212 17.5124 17.2289C18.1371 17.3628 18.7314 17.6451 19.3105 18.0407C19.7722 18.3542 20.2187 18.756 20.6667 19.1996C21.8721 20.4063 23.047 22.0225 24.3087 23.7695C25.7869 25.8201 27.3618 27.9924 29.1675 29.6915C29.7313 30.2203 30.3142 30.705 30.9253 31.1257C31.3405 31.4103 31.7725 31.6568 32.2144 31.8752L32.3089 31.927C32.4362 31.9878 32.5657 32.0441 32.6975 32.0997C33.7398 32.544 34.8522 32.7936 36.0591 32.7617C35.2103 31.771 34.4057 30.791 33.6339 29.8185C33.3764 29.4967 33.1234 29.1741 32.8758 28.8545L32.8766 28.8537ZM23.2484 24.5372C21.0876 21.5371 19.0426 18.7195 16.9549 18.4882C15.553 18.6464 14.436 19.4195 13.5666 20.8279C13.5484 20.8579 13.5287 20.887 13.5088 20.9166C13.4821 20.9561 13.4548 20.9966 13.4295 21.041C13.8684 21.2183 14.2676 21.4473 14.6509 21.6968C15.1591 22.0217 15.6261 22.3969 16.0604 22.8169C17.1957 23.9148 18.1222 25.2707 19.0266 26.6061C20.187 28.3166 21.3253 29.9525 22.8332 31.0573C23.0176 31.1943 23.2004 31.3267 23.397 31.4454C23.6012 31.5686 23.8176 31.6698 24.037 31.771C24.901 32.1743 25.8732 32.4208 27.0344 32.4208C27.903 32.4208 28.8608 32.2823 29.8916 32.0198C27.2897 30.1298 25.189 27.2278 23.2477 24.5365L23.2484 24.5372Z"
                fill="#211C17"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M171.48 31.2954V32.1339H178.935V31.2939L176.962 30.9728V9.45337L171.48 10.0012V10.9021L173.447 11.2582V30.9744L171.48 31.2954ZM106.556 24.9991C106.556 24.818 106.565 24.659 106.587 24.5327H115.938V23.9164C115.938 22.091 115.428 20.6613 114.408 19.6295C113.385 18.5993 111.932 18.0849 110.035 18.0849C109.028 18.0849 108.085 18.2599 107.214 18.6175C106.344 18.9706 105.585 19.4728 104.942 20.1165C104.297 20.7617 103.79 21.5241 103.425 22.403C103.059 23.2826 102.876 24.2519 102.876 25.302C102.876 26.3961 103.05 27.3914 103.391 28.2831C103.735 29.1734 104.221 29.9327 104.843 30.5506C105.468 31.176 106.208 31.6592 107.071 32.0039C107.931 32.344 108.877 32.5175 109.909 32.5175C111.2 32.5175 112.287 32.3105 113.166 31.8935C114.047 31.4705 114.888 30.8237 115.682 29.9457L114.876 29.0098C114.359 29.5683 113.78 30.037 113.135 30.4128C112.488 30.7887 111.682 30.9744 110.715 30.9744C110.094 30.9744 109.521 30.8268 109.006 30.5224C108.488 30.2219 108.048 29.8156 107.68 29.3012C107.318 28.7838 107.036 28.1926 106.843 27.526C106.652 26.861 106.556 26.1633 106.556 25.4305V24.9991ZM82.831 21.7774C82.831 21.7774 81.455 20.6763 80.3128 20.6763C78.7989 20.6763 78.1543 22.5443 78.1543 24.3408V30.9757L81.0694 31.2953V32.1346H72.6639V31.2961L74.7043 30.975V20.0844L72.5252 19.7306V18.8266L77.8968 18.2141V21.7294H77.9288C78.165 21.0218 78.4355 20.4283 78.7364 19.9565C79.0374 19.4833 79.365 19.1089 79.7193 18.8266C80.0744 18.5504 80.7525 18.0863 81.7887 18.0863C82.8249 18.0863 84.207 18.9613 84.207 18.9613L82.831 21.7766V21.7774ZM95.9901 32.3911V28.9762H95.9276C95.4552 30.2012 94.8046 31.0991 93.9809 31.6675C93.1542 32.2366 92.2056 32.5197 91.1351 32.5197C89.6799 32.5197 88.601 32.092 87.9046 31.2307C87.2066 30.374 86.8607 29.2106 86.8607 27.7512V19.7618L84.9635 19.3761V18.5376H90.3763V29.8139C90.7191 30.5018 91.3119 30.8427 92.1607 30.8427C92.8205 30.8427 93.3798 30.6958 93.8346 30.3953C94.2903 30.0924 94.6628 29.6952 94.9501 29.2022C95.235 28.7076 95.4423 28.1293 95.571 27.4597C95.6983 26.7947 95.7631 26.1054 95.7631 25.3993V19.6964L93.7059 19.3738V18.5383H99.2778V30.6821L101.246 31.0055V31.9049L95.9871 32.3918L95.9901 32.3911ZM112.225 21.8572C112.162 21.3413 112.033 20.8855 111.839 20.4876C111.644 20.0904 111.386 19.7632 111.062 19.5045C110.741 19.2443 110.323 19.1165 109.805 19.1165C109.31 19.1165 108.872 19.2458 108.499 19.5045C108.123 19.7632 107.809 20.0957 107.562 20.5059C107.317 20.9129 107.114 21.3679 106.966 21.8717C106.817 22.3776 106.72 22.8874 106.678 23.401H112.324C112.322 22.8882 112.29 22.3708 112.225 21.8564V21.8572ZM145.533 24.9991C145.533 24.818 145.544 24.659 145.565 24.5327H145.565H154.92V23.9164C154.92 22.091 154.408 20.6613 153.391 19.6295C152.368 18.5993 150.911 18.0849 149.018 18.0849C148.007 18.0849 147.066 18.2599 146.194 18.6175C145.325 18.9706 144.569 19.4728 143.921 20.1165C143.276 20.7617 142.769 21.5241 142.404 22.403C142.039 23.2826 141.856 24.2519 141.856 25.302C141.856 26.3961 142.029 27.3914 142.372 28.2831C142.717 29.1734 143.201 29.9327 143.828 30.5506C144.449 31.176 145.19 31.6592 146.049 32.0039C146.91 32.344 147.857 32.5175 148.891 32.5175C150.178 32.5175 151.266 32.3105 152.144 31.8935C153.029 31.4705 153.867 30.8237 154.664 29.9457L153.858 29.0098C153.339 29.5683 152.761 30.037 152.117 30.4128C151.469 30.7887 150.664 30.9744 149.697 30.9744C149.071 30.9744 148.504 30.8268 147.988 30.5224C147.47 30.2219 147.028 29.8156 146.662 29.3012C146.295 28.7838 146.017 28.1941 145.822 27.526C145.63 26.861 145.533 26.1633 145.533 25.4305V24.9991ZM151.212 21.8572C151.146 21.3413 151.016 20.8855 150.821 20.4876C150.628 20.0904 150.372 19.7632 150.049 19.5045C149.727 19.2443 149.308 19.1165 148.792 19.1165C148.296 19.1165 147.862 19.2458 147.483 19.5045C147.108 19.7632 146.797 20.0957 146.548 20.5059C146.302 20.9129 146.101 21.3679 145.95 21.8717C145.801 22.3776 145.704 22.8874 145.662 23.401H151.305C151.305 22.8882 151.277 22.3708 151.212 21.8564V21.8572ZM189.196 31.9423C188.52 32.3273 187.619 32.519 186.502 32.519C185.291 32.519 184.343 32.1561 183.659 31.4264C182.973 30.6959 182.632 29.7296 182.632 28.5259V19.8213H180.184V18.855L183.085 18.505L184.517 13.8826H186.148V18.5392H190.118V19.8936H186.148V27.9773C186.148 28.9223 186.329 30.7819 188.178 30.7819C188.608 30.7819 189.009 30.6883 189.372 30.508C189.738 30.3231 190.026 30.1519 190.306 29.8521L190.864 30.6206C190.479 31.1106 189.876 31.5534 189.197 31.9415L189.196 31.9423ZM200.58 31.2955V32.1355H208V31.2955L206.033 30.9774V22.8572C206.033 21.3963 205.685 20.2344 204.987 19.3769C204.287 18.5178 203.21 18.0872 201.742 18.0872C200.647 18.0872 199.721 18.3512 198.971 18.8762C198.22 19.3997 197.593 20.1796 197.1 21.2106L197.132 9.45337L191.648 10.0012V10.9021L193.616 11.2582V30.9759L191.647 31.3V32.137H199.068V31.3L197.129 30.9759V25.2738C197.129 24.5441 197.193 23.8456 197.321 23.1798C197.446 22.5156 197.651 21.9297 197.927 21.4252C198.204 20.9207 198.564 20.5152 199.013 20.2154C199.457 19.9125 200.008 19.7665 200.671 19.7665C201.159 19.7665 201.55 19.8578 201.848 20.0404C202.144 20.2199 202.368 20.4505 202.515 20.7297V30.9744L200.58 31.2955ZM137.929 11.3846V12.3547L140.398 12.7047L135.809 26.8215L131.22 12.704L133.583 12.3175V11.3846H125.04V12.3175L127.232 12.7032L128.65 16.7321L125.361 26.7211L120.631 12.7025L122.66 12.3525V11.3831H114.377V12.3532L116.611 12.7694L123.51 32.134H125.093L129.459 18.9554L133.992 32.134H135.574L142.099 12.7314L144.055 12.3167V11.3838L137.929 11.3846ZM167.576 32.5184C168.222 32.5184 168.81 32.3837 169.338 32.1189V32.1182C169.863 31.8504 170.313 31.4905 170.686 31.0377L170.24 30.3514C170.24 30.3514 170.03 30.4899 169.924 30.5416C169.761 30.6162 169.563 30.652 169.325 30.652C168.96 30.652 168.661 30.5287 168.425 30.2806C168.185 30.0356 168.067 29.5616 168.067 28.8502V22.3636C168.067 21.01 167.634 18.025 162.855 18.025C160.277 18.025 158.573 19.091 157.438 20.3807L158.478 21.3432C158.907 20.6988 160.175 19.5399 162.088 19.5399C164.256 19.5399 164.549 21.4186 164.549 22.1688V23.3444C164.549 23.3444 164.165 23.4235 161.785 23.8983C159.407 24.3731 157 25.6666 157 28.7406C157 30.0227 158.078 32.5222 160.746 32.5222C161.58 32.5222 162.444 32.3343 163.052 31.9614C163.665 31.5848 164.224 31.1268 164.742 30.5918C164.979 31.2135 165.338 31.6913 165.816 32.0238C166.294 32.3571 166.88 32.5184 167.576 32.5184ZM164.546 24.411L164.543 24.4114V24.411H164.546ZM164.543 24.4114V29.6535C164.265 29.9563 163.931 30.2059 163.536 30.3992C163.142 30.5894 162.751 30.6838 162.368 30.6838C161.15 30.6838 160.158 29.5424 160.158 27.9826C160.158 25.8978 161.383 25.1422 162.462 24.863C163.271 24.6537 164.484 24.4227 164.543 24.4114ZM72.6191 12.8037L73.0709 16.4126V16.4119H74.4165V11.3847H56.3528V16.4119H57.6999L58.1509 12.803H63.4829V30.7836L60.7719 31.167V32.1334H69.9981V31.167L67.2887 30.7836V12.8037H72.6191Z"
                fill="#211C17"
              />
            </svg>
          </div>
        </div>
      ),
      {
        width: 1200,
        height: 630,
        fonts: [
          {
            name: "DINNextLTPro",
            data: dINNextLTProRegularData,
            weight: 300,
            style: "normal"
          },
          {
            name: "DINNextLTPro",
            data: dINNextLTProMediumData,
            weight: 400,
            style: "normal"
          }
        ]
      }
    );
  } catch (e: any) {
    return new Response(`Failed to generate the image`, {
      status: 500
    });
  }
};

export default handler;

export const config = {
  runtime: "edge"
};
